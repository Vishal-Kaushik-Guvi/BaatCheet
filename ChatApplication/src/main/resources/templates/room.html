<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>BaatCheet | Rooms</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col">

<!-- ðŸ” Header -->
<header class="bg-indigo-600 text-white p-4 flex justify-between items-center shadow">
    <h1 class="text-xl font-semibold">ðŸ’¬ BaatCheet</h1>

    <div class="flex items-center gap-4">
        <span th:text="${username}" class="font-medium">username</span>
        <a href="/logout" class="text-sm underline">Logout</a>
    </div>
</header>

<!-- ðŸ§± Main Content -->
<main class="flex-1 p-6 max-w-4xl mx-auto w-full">

    <!-- ðŸ  Title -->
    <h2 class="text-2xl font-semibold text-gray-800 mb-6">Chat Rooms</h2>

    <!-- âž• Create Room -->
    <div class="bg-white p-4 rounded-lg shadow mb-6">
        <form method="post" action="/rooms/create" class="flex gap-3">
            <input
                    type="text"
                    name="roomName"
                    placeholder="Enter room name..."
                    required
                    class="flex-1 border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
            >
            <button
                    type="submit"
                    class="bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700">
                Create
            </button>
        </form>
    </div>

    <!-- ðŸ“‹ Room List -->
    <div class="bg-white rounded-lg shadow divide-y">

        <!-- Example Room -->
        <div class="flex items-center justify-between p-4 hover:bg-gray-50">
            <div>
                <p class="font-medium text-gray-800">General Chat</p>
                <p class="text-sm text-gray-500">Public room</p>
            </div>
            <a
                    href="/chat?roomId=general"
                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-indigo-700">
                Join
            </a>
        </div>

        <!-- Thymeleaf Dynamic Rooms -->
        <div th:each="room : ${rooms}"
             class="flex items-center justify-between p-4 hover:bg-gray-50">

            <div>
                <p class="font-medium text-gray-800" th:text="${room.name}">
                    Room Name
                </p>
                <p class="text-sm text-gray-500">
                    Created by <span th:text="${room.createdBy}">user</span>
                </p>
            </div>

            <a
                    th:href="@{/chat(roomId=${room.id})}"
                    class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-indigo-700">
                Join
            </a>
        </div>

    </div>

</main>

<script>
    feather.replace();
</script>

</body>
</html>